<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:f="http://java.sun.com/jsf/core"
	  >

<h:head>
    <title>Oficinaço - Ordem de Serviço</title>
</h:head>
<h:body>
	<h:form id="form">
	
        <ui:include src="menu.xhtml" />	

        <p:panelGrid columns="2"  style=" margin-top: 10px;" >
        	
        	<h:outputText value="Cliente"/>
        	<p:autoComplete id="pessoa" value="#{ordemServicoControl.pessoaId}" 
                                completeMethod="#{ordemServicoControl.completePessoa}"
                                var="pessoa" itemLabel="#{pessoa}" itemValue="#{pessoa.id}" forceSelection="true" scrollHeight="250">		
		    			<p:ajax event="itemSelect" listener="#{ordemServicoControl.selecionarPessoa}" /> 
			</p:autoComplete> 
			
        	<h:outputText value="Funcionário"/>
        	<p:autoComplete id="funcionario" value="#{ordemServicoControl.funcionarioId}" 
                                completeMethod="#{ordemServicoControl.completeFuncionario}"
                                var="func" itemLabel="#{func}" itemValue="#{func.id}" forceSelection="true" scrollHeight="250">
						<p:ajax event="itemSelect" listener="#{ordemServicoControl.selecionarFuncionario}" /> 
			</p:autoComplete> 

			<h:outputText value="Placa"/>
			<p:autoComplete id="veiculo" value="#{ordemServicoControl.veiculoId}" 
                                completeMethod="#{ordemServicoControl.completeVeiculo}"
                                var="veiculo" itemLabel="#{veiculo}" itemValue="#{veiculo.id}" forceSelection="true" scrollHeight="250">
						<p:ajax event="itemSelect" listener="#{ordemServicoControl.selecionarVeiculo}" /> 
			</p:autoComplete>

        </p:panelGrid>
		 
        <p:panelGrid columns="2" style="margin-left: 370px; margin-top: -220px;" >
        	
        	<h:outputText value="Serviço"/>
        	<p:autoComplete id="servico" value="#{ordemServicoControl.servicoId}" style="width: 100%"
                                completeMethod="#{ordemServicoControl.completeServico}"
                                var="servico" itemLabel="#{servico}" itemValue="#{servico.id}" forceSelection="true" scrollHeight="250">
                 <p:ajax event="itemSelect" listener="#{ordemServicoControl.selecionarServico}" />  
			</p:autoComplete>  

        	<h:outputText value="Quantidade"/>
        	<p:inputText value="#{ordemServicoControl.ordemServicoServico.quantidade}"/>

			<p:commandButton value="Adicionar Servico" action="#{ordemServicoControl.adicionarServicoLista}" style="background-color: green; margin-left: 5px; margin-top: 10px;" update="form"/>
        </p:panelGrid>


		<p:panelGrid columns="2" style="margin-left: 800px; margin-top: -230px;" >
    
			<h:outputText value="Produto"/>
        	<p:autoComplete id="produto" value="#{ordemServicoControl.produtoId}"
                                completeMethod="#{ordemServicoControl.completeProduto}"
                                var="produto" itemLabel="#{produto}" itemValue="#{produto.id}" forceSelection="true" scrollHeight="250">
                 <p:ajax event="itemSelect" listener="#{ordemServicoControl.selecionarProduto}" />  
			</p:autoComplete>  

        	<h:outputText value="Quantidade"/>
        	<p:inputText value="#{ordemServicoControl.ordemServicoProduto.quantidade}"/>

			<p:commandButton value="Adicionar Produto" action="#{ordemServicoControl.adicionarProdutoLista}" style="background-color: green; margin-left: 5px; margin-top: 10px;" update="form"/>        
		
		</p:panelGrid>


		<p:commandButton value="Salvar" action="#{ordemServicoControl.salvar}" style="background-color: green; margin-left: 1050px; margin-top: 10px;" update="form"/>

        
        <p:dataTable value="#{ordemServicoControl.ordemServico.servicos}" var="servico" allowUnsorting="true" sortMode="single">
			
			<p:column sortBy="#{ordemServicoControl.ordemServicoServico.servico.nome}" headerText="Nome" >
				<h:outputText value="#{ordemServicoControl.ordemServicoServico.servico.nome}" />
			</p:column>

			<p:column sortBy="#{ordemServicoControl.ordemServicoServico.preco}" headerText="Preço" >
				<h:outputText value="#{ordemServicoControl.ordemServicoServico.preco}"/>
			</p:column>     

			<p:column sortBy="#{ordemServicoControl.ordemServicoServico.quantidade}" headerText="Quantidade" >
				<h:outputText value="#{ordemServicoControl.ordemServicoServico.quantidade}"/>
			</p:column>     

			<p:column footerText="#{ordemServicoControl.ordemServico.totalServicos}">
				<h:outputText value="#{servico.total}"/>
			</p:column> 
			        
        </p:dataTable>
        
    </h:form>
</h:body>

</html>        